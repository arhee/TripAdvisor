if(typeof(ta.attractions)=="undefined"){ta.attractions=new Object()}function checkEmailActionAttr(b,d,a,c){window.location="mailto:"+b+"?subject="+a;new Request({url:"/ActionRecord?excludeFromVS=false&action="+c+"&d="+d}).send()}ta.attractions.showMoreDetails=function(d,c,e){var f=ta.id("ATTRACTION_OVERLAY_CONTENTS");if(f){var b=f.clone();b.removeClass("detailsOverlayHide");var a=new ta.overlays.CenteredOverlay({showCloseButton:true,style:"s4 mg",content:b,fontSize:"1em",attachCloseEvent:true});ta.trackEventOnPage("AttractionListing","MoreDetails",e,1,false)}};ta.attractions.showMoreTags=function(b,a){b.preventDefault();ta.select(".collapse").removeClass("hidden");a.addClass("hidden");return false};if(typeof(ta.locationDetail)=="undefined"){ta.locationDetail={}}ta.locationDetail.checkEmailAction=function(d,c,b,f,a,e){window.location="mailto:"+b+"?subject="+a;new Request({url:"/ActionRecord?excludeFromVS=false&action="+e+"&d="+f}).send()};ta.locationDetail.resizeHeading=function(d){var c=ta.id("HEADING");if(c==undefined||c==null){if(d>10){return}setTimeout(function(){ta.locationDetail.resizeHeading(d+1)},50)}else{var b=c.parentNode.offsetWidth;var a=2.5835;while(c.offsetWidth>b&&a>1){a=a-0.1;c.style.fontSize=a+"em"}}};ta.locationDetail.resizeHeading(1);ta.locationDetail.mapMouseOver=function(c,b){var a=b.getElement(".expandMap .expandMapIcon");if(a){a.toggleClass("sprite-expandMapLight");a.toggleClass("sprite-expandMapDark")}};ta.locationDetail.showMoreDetails=function(d,c,e){var f=ta.id("OVERLAY_CONTENTS");if(f){var b=f.clone();b.removeClass("detailOverlayHide");var a=new ta.overlays.CenteredOverlay({showCloseButton:true,style:"s4 mg",content:b,fontSize:"1em",attachCloseEvent:true})}};ta.locationDetail.showMoreHours=function(e,d,f,a){var g=ta.id("HOUR_OVERLAY_CONTENTS");if(g){var c=g.clone();c.removeClass("hoursOverlayHide");var b=new ta.overlays.RelativeOverlayBelow({activate:ta.overlays.ACTIVATE_CLICK,backdrop:ta.overlays.BACKDROP_PINNED,showCloseButton:true,style:"s4 mg",content:c},d);if(a=="Eatery"){ta.trackEventOnPage("RestaurantListing","MoreHours",f,1,false)}else{if(a=="Attraction"){ta.trackEventOnPage("AttractionListing","MoreHours",f,1,false)}}}};ta.servlet.LocationDetail=(function(){var e=null;var f=false;var i=false;var b=false;var a;var h=function(){var y={getPosY:function(C){return C?C.getPosition().y:0},getTabs:function(C){return C&&C.getChildren("li:not(.tabs_more)")},getLastTab:function(E,C){var D;if(C){D=E&&E.getChildren("li:not(.hidden)")}else{D=this.getTabs(E)}return D&&D[D.length-1]}};var x=ta.id("PERSISTENT_TAB_HEADER");var t=x&&x.getElement(".tabs_pers_content");var A=ta.id("TABS_MORE");if(!A||!t||!x){return false}var o=t.getElements(".tabs_pers_item");if(o.length<1){return false}var q=x.getElement(".persistent_tabs_header");var w=o[0];var l=y.getLastTab(t);var p=y.getLastTab(t,true);var k=0;var B=0;var n=o.length;var s=A.getElement(".tabs_more_content");var j=x.getElement("#SAVES");var z=0;if(!A.hasClass("hidden")){A.addClass("hidden");A.removeClass("lastTab");t.adopt(s.getChildren());t.adopt(A);p&&p.addClass("lastTab")}for(var u=0;u<n;u++){B=w.getPosition().y+w.getSize().y/2;t=x.getElement(".tabs_pers_content");o=y.getTabs(t);l=y.getLastTab(t);p=y.getLastTab(t,true);k=y.getPosY(p);z=q&&q.hasClass("fixed")?0:y.getPosY(j);var v=B>0&&((p&&k>B)||(z&&z>B));if(v&&s&&l){s.grab(l,"top");A.removeClass("hidden")}else{break}}var m=function(D){var C=document.getElement("#TABS_MORE .tabs_more_content");if(C&&!C.isDisplayed()){C.show();D.stop();window.addEvent("click",r)}};var r=function(){var C=document.getElement("#TABS_MORE .tabs_more_content");if(C&&C.isDisplayed()){C.hide();window.removeEvent("click",r)}};o.removeClass("lastTab");p.addClass("lastTab");x.removeClass("invisible");A.addEvent("click",m);window.addEvent("resize",h);if(window.isTabletOnFullSite){window.addEvent("orientationchange",function(){d()});window.addEvent("gesturestart",function(C){a=C.scale});window.addEvent("gestureend",function(C){if(a!==C.scale){a=C.scale;d()}})}};var d=function(){var l=ta.find(".persistent_tabs_container"),n=ta.find(".persistent_tabs_header"),o=ta.id(window),k=150;var j=document.getElement(".above_the_fold")||document.getElement(".nolow");var m=j?j.getTop():486;if(o.getScrollTop()<(m-l.getHeight())){if(n.hasClass("fixed")&&!f){setTimeout(function(){n.removeClass("fixed");l.removeClass("fixed");n.addClass("static");l.addClass("static");f=false;n.style.transition="none";n.style.top=0;h()},k);f=true;n.style.transition="";n.style.top="-52px"}}else{if(!n.hasClass("fixed")){n.style.transition="none";n.addClass("fixed");l.addClass("fixed");n.removeClass("static");l.removeClass("static");n.style.top="-52px";setTimeout(function(){n.style.transition="";n.style.top=0;h();window.fireEvent("scrollingTabs_updateTabBar",{height:n.offsetHeight})},1)}}};var c={initTabs:function(){g.attachScrollToTabBar();var j=ta.id("PERSISTENT_TAB_HEADER");j&&j.removeClass("invisible")},attachScrollToTabBar:function(){var k=ta.find(".persistent_tabs_container"),m=ta.find(".persistent_tabs_header");if(!k||!m){return}var l=k.getHeight()+24;var j=k.getHeight()+28;e=new ta.widgets.ScrollingTabs(window,".scroll_tabs",true,l,j);e.init();e.setCallback("tabChangeOnScroll",function(o,n,p){ta.trackEventOnPage("Tab_Bar",(p.id+"_SCROLL"),p.id)});e.setCallback("afterScroll",function(o,n,p){g.afterScroll(o,n,p);if(Browser.name.toLowerCase()==="firefox"){e.init();e.show(ta.id(p.getAttribute("data-tab")),1);e.setCallback("afterScroll",null)}});if(window.addEventListener){window.addEvent("scroll",d)}else{window.attachEvent("onscroll",d)}h();d()},clickTab:function(n){var m=60;window.removeEvent("scroll",ta.servlet.LocationDetail.onScroll);if(n.id=="TABS_MENU"){ta.servlet.LocationDetail.loadMenu()}else{if(n.id=="TABS_ANSWERS"){ta.servlet.LocationDetail.loadAnswers()}}var q=300;var l=e.getTabAnchor(n);var k=ta.id("PAGE");var p=k.getElement(".tabsSpacer");if(p){var o=k.getHeight()-l.getPosition(k).y-p.getHeight();var j=0;if(o<window.getHeight()){j=window.getHeight()-o;if(j>parseInt(p.style.height,10)){p.style.height=j+"px"}}}if(!l||!k){return}e.show(n,q,m);return false},afterScroll:function(n,j,o){var l=ta.id("PAGE");var p=l.getElement(".tabsSpacer");if(p){var m=l.getHeight()-o.getPosition(l).y-p.getHeight();var k=0;if(m>=window.getHeight()){p.style.height=k+"px"}}if(!i||!b){window.addEvent("scroll",ta.servlet.LocationDetail.onScroll)}},goToMenu:function(){var j=ta.id("TABS_MENU");if(j){this.clickTab(j)}},loadMenu:function(){if(!i){i=true;var k=ta.id("INLINE_MENU");var l=window.modelLocId;if(k.getAttribute("data-attribution")!=="SinglePlatform"){new Request({url:"/MenuAjax?locId="+l,method:"get",onSuccess:function(m){k.innerHTML=m}}).send()}var j=k.getAttribute("data-attribution");if(j==="Locu"){ta.trackEventOnPage("Tab_Content","L_MENU_VISIBLE","",0,false)}else{if(j==="SinglePlatform"){ta.trackEventOnPage("Tab_Content","SP_MENU_VISIBLE","",0,false)}}}},loadAnswers:function(){if(!b){b=true;ta.store("answers.pid.pageType",39146);ta.store("answers.pid.registration.question",39145);ta.store("answers.pid.registration.vote",39147);var j=ta.id("QUESTION_LIST");if(!j||!window.modelLocId){return false}ta.run("ta.answers.Answer.updateAnswersTab",{},window.modelLocId,(e?e.test:null));return false}},onScroll:function(){if(e&&e.isScrolling()){return}if(!b&&ta.util.element.isScrolledIntoView(ta.id("ANSWERS_TAB"),ta.id("FLOATING_PERSISTENT_TAB_HEADER"))){ta.servlet.LocationDetail.loadAnswers()}if(!i&&ta.util.element.isScrolledIntoView(ta.id("INLINE_MENU"),ta.id("FLOATING_PERSISTENT_TAB_HEADER"))){ta.servlet.LocationDetail.loadMenu()}if(b&&i){window.removeEvent("scroll",ta.servlet.LocationDetail.onScroll)}}};var g=c;return c})();(function(a){var b=function(){var K=a.id("PERSISTENT_TAB_HEADER");if(K){var H=K.getElement(".tabs_pers_content.has_more_tab");var e=K.getElement(".tabs_buttons");if(H&&e){H.style.marginRight=e.getWidth()+"px"}}var u=1;var D=3;var g=12;var o=23;var L=a.id("ABOVE_THE_FOLD");if(L){var r=L.getElement(".above_fold_listing_details .flexible_details");var J=L.getElement(".alsoviewedbar");var f=L.getElement(".highlightsbar")||J;var F=L.getElement(".photos_and_highlights");var v=L.getElement(".map");var s=L.getElement(".histograms");var t=L.getElement(".highlight_review");var n=L.getElement(".bubbleHistogram");var h=14;if(F&&s&&t&&n){var i=[[],[]];n.getElements(".ratingRow").each(function(O,x){i[x%2].push(O)});var z=0;for(var N=0;N<i.length;N++){var I=0;for(var A=0;A<i[N].length;A++){var G=i[N][A];var C=G.getElement(".label");I=Math.max(I,a.util.element.getTotalWidth(C)-C.getWidth()+a.util.element.getTotalWidth(C.getElement(".text"))+a.util.element.getTotalWidth(G.getElement(".row")))}z+=I}var p=parseInt(s.getComputedStyle("width"));var M=6;var m=p-z<=M;n.toggleClass("narrow",m);n.toggleClass("wide",!m)}if(F&&v){var j=a.select(".above_fold_listing_details .detail_section");if(f){f.style.height=""}j.each(function(x){if(!x.style.paddingTop){x.style.paddingTop=g+"px";x.style.paddingBottom=g+"px"}});var q=0;r.getChildren().each(function(x){q+=x.getHeight()});var d=0;if(J&&f!=J){d=J.getHeight()+h}var B=F.getHeight()-r.getPosition(F).y-u;r.style.height=Math.max(B,q)+"px";var y=j.length;if(y>0){var l=q;var E=(B-l)%(2*y);var k=(B-l-E)/(2*y);j.each(function(O){var x=parseInt(O.style.paddingTop)+k;x=Math.max(Math.min(x,o),g);O.style.paddingTop=x+"px";O.style.paddingBottom=O.style.paddingTop})}if(f){if(B<q){var w=L.getElement(".listingbar");if(w&&f){f.style.height=(w.getHeight()-f.getPosition(w).y-d-D)+"px"}}}}}};if(!Browser.ie||Browser.version>=8){try{b()}catch(c){}a.queueForReady(function(){b();window.addEvent("resize",b)},"WINDOW_RESIZE_EVENT")}try{window.addEvent("scroll",a.servlet.LocationDetail.onScroll)}catch(c){a.util.error.record(c,"LocationDetail.onScroll",null,null,"ERROR")}}(ta));window.onload=function(){var a=document.location.toString();var d=a.lastIndexOf("#helpful");if(d>-1){var b=a.substring(d+1,a.length);var c=document.getElementById(b);if(c){c.innerHTML='<p><font face="arial,helvetica" color="#cc0000" style="font-size: 11px">'+JS_Thankyou+"</font></p>"}}};var ratingsToSubmit={};function setupTranslationRatingSlider(a){var h=a.getElement(".usefulReviewContainer");var f=a.getElement(".usefulReviewSlider");var d=a.getElement(".userfulReviewSrc");var c=a.getElement(".userfulReviewUserId");var e=a.getElement(".usefulReviewThankYou");if(h&&f&&d&&c&&e){var g=d.innerHTML;var b=new Slider(h,f,{onChange:function(j){ratingsToSubmit[g]={userId:c.innerHTML,rating:j+1};e.style.display="block"},steps:4,offset:0});b.setDefault(2)}}window.addEvent("load",function(){(function(){$$("div.usefulReview").each(function(a){setupTranslationRatingSlider(a)})}).delay(50)});function recordFirstPageView(){var e=ta.id("recPageViewTiming");if(e){var b=e.getElement(".geoId").innerHTML;var d=e.getElement(".locId").innerHTML;var a=new Date();var c=a.getTime()-pageInit.getTime();new Request({url:"/ActionRecord-g"+b+"-d"+d+"?action=PageViewTiming&time="+c}).send()}}window.addEvent("beforeunload",recordFirstPageView);ta.servlet.Hotel.checkCompareHotels=function(){try{var c=false;for(var b=0;b<3;b++){var h=ta.id("compare_hotels_"+b);if(h&&h.checked){c=true}}var a=ta.id("COMPARE_HOTELS");var f=ta.id("SELECT_HOTEL_TO_COMPARE");if(c==false){a.disabled=true;var d=ta.id("PROPERTIES_COMPARE").getElement(".button");if(d){d.set("class","greybutton")}if(f){f.setStyle("display","block")}}else{a.disabled=false;if(f){f.setStyle("display","none")}var d=ta.id("PROPERTIES_COMPARE").getElement(".greybutton");if(d){d.set("class","button")}}}catch(g){ta.util.error.record(g,"checkCompareHotels-content missing")}};function setBVCookie(b,a){Cookie.write("bvsort","true",{domain:cookieDomain,time:5});ta.util.cookie.setPIDCookie(a);return true}function checkEmailAction(c,e,a,b,d){window.location="mailto:"+c+a+d+"?subject="+b;new Request({url:"/ActionRecord?excludeFromVS=false&action=BusinessListingsEmail&d="+e}).send()}function makeOdcLink(b,a){window.open("/ShowUrl?&excludeFromVS=true&odc=BusinessListingsUrl&d="+b+"&url="+a)}function makeCouponLink(b,c,e,a,d){window.open(d+c+b+a+"&excludeFromVS=false&odc=BLSpecialOfferUrl&d="+e)}var tabContents=null;var tabCurrent=false;window.addEvent("load",function(){if(ta.id("CONTAINER01")){tabContents={};tabCurrent=$$("#TABS01 .current");if(tabCurrent){tabCurrent=tabCurrent[0]}}});function removeClassRecursive(d,a){if(!d){return}if(d.removeClass){d.removeClass(a)}if(d.childNodes){var c=d.childNodes;for(var b=0;b<c.length;b++){removeClassRecursive(c[b],a)}}}function showTab(d,h){try{if(!tabContents){return}if(!tabCurrent){tabCurrent=ta.id("tabRatings")}var k=document.getElementById("CONTAINER01");if(!k){ta.util.error.record(null,"hotel tab loading - no container")}if(tabCurrent&&!tabContents[tabCurrent.id]){tabContents[tabCurrent.id]=k.innerHTML}removeClassRecursive(tabCurrent,"current");var a=ta.id(h);if(!a||!a.addClass){ta.util.error.record(null,"hotel tab loading - trouble wrapping elmt");return}tabCurrent=a.addClass("current");if(tabContents[h]){try{k.innerHTML=tabContents[h];if(window.behavior){window.behavior.apply(ta.id(k))}}catch(g){ta.util.error.record(g,"showTab - existing")}return}var l=false;try{l=location.pathname;if(l&&typeof l=="string"&&l.length>0){if(l.charAt(0)=="/"){l=l.substring(1)}var j=l.indexOf("-");if(j>=0){l=l.substring(0,j)}}}catch(g){ta.util.error.record(g,"hotel tab loading - servlet access",null,{tabName:h})}k.innerHTML="";var c=new Asset.image(CDNHOST+"/img2/generic/site/loop.gif",{"class":"anim_loop"}).inject(k,"top");var f="http://"+document.domain;new Request({url:f+"/LocationTab",evalScripts:true,data:{d:d,tab:h.replace(/tab/,"").toLowerCase(),from:l},onSuccess:rpcShowTab,onFailure:function(e){ta.util.error.record(g,"hotel tab loading - no content",null,{status:e.status,tabName:h,detId:d,from:l})}}).send()}catch(b){ta.util.error.record(b,"hotel tab loading",null,{tabName:h})}}function rpcShowTab(a){try{var b=document.getElementById("CONTAINER01");b.innerHTML=a;if(window.behavior){window.behavior.apply(ta.id(b))}tabContents[this.options.data.tab]=a}catch(c){ta.util.error.record(c,"hotel tab loading - content load")}}function setUpFootprint(a,d){try{var b=TALSO.get("CookieId");if(b==""){TALSO.set("CookieId",d);b=TALSO.get("CookieId")}if(b!=""&&!a.href.contains("footprint")){a.href=a.href+"&fp="+b}}catch(c){if(ta.id("LsoId")){ta.id("LsoId").value=""}}return true}function iapToggleSuspiciousReason(){var b=document.getElementById("reasonSelect");var a=[9,18,19,20];for(i=0;i<a.length;i++){document.getElementById("reason"+a[i]+"msg").style.display=(b.value==a[i]?"inline":"none")}var c=(b.value==9||b.value==18||b.value==19||b.value==20)?"inline":"none";document.getElementById("reasonExplanation").style.display=c;document.getElementById("iapSubmitButton").style.display=c;document.getElementById("errorMsg").style.display="none"}function closeIAPConfirmBoxInXSeconds(b,a){setTimeout("closeIAPConfirmBox()",a);document.getElementById("ReportIAP_"+b).style.display="none";document.getElementById("ReportIAP_ThankYou_"+b).style.display="inline"}function closeIAPOwnerResponseConfirmBoxInXSeconds(b,a){setTimeout("closeIAPConfirmBox()",a);document.getElementById("ReportIAP_OR_"+b).style.display="none";document.getElementById("ReportIAP_OR_ThankYou_"+b).style.display="inline"}function closeIAPOwnerResponseOverlay(){var a=ta.retrieve("iapOwnerFlyout");if(a){a.hide()}}function closeIAPConfirmBox(){var a=ta.retrieve("overlays.current");if(a){a.hide()}}function validateExplanation(){window.validateiap_explanationsuspicious=function(b){var a=document.getElementById("iap_explanationsuspicious");if(a.comment.value){if(a.comment.value.length>200){document.getElementById("explanationTooLongErrorMsg").style.display="inline";document.getElementById("errorMsg").style.display="none";return false}disableRICV2SubmitLink();closeIAPConfirmBoxInXSeconds(a.reviewid.value,10000);return true}else{document.getElementById("errorMsg").style.display="inline";document.getElementById("explanationTooLongErrorMsg").style.display="none";return false}};window.validateiap_explanation=function(b){var a=document.getElementById("iap_explanation");if(a.comment.value){if(a.comment.value.length>200){document.getElementById("explanationTooLongErrorMsg").style.display="inline";return false}}disableRICV2SubmitLink();closeIAPConfirmBoxInXSeconds(a.reviewid.value,10000);return true};window.validateiap_explanation_owner_response=function(b){var a=document.getElementById("iap_explanation_owner_response");if(a.comment.value){if(a.comment.value.length>200){document.getElementById("explanationTooLongErrorMsgOwnerResponse").style.display="inline";return false}}disableRICV2OwnerResponseSubmitLink();closeIAPOwnerResponseOverlay();closeIAPOwnerResponseConfirmBoxInXSeconds(a.reviewid.value,10000);return true}}function disableRICV2SubmitLink(){var a=document.getElementById("submitLink");a.setAttribute("onclick","return false;")}function disableRICV2OwnerResponseSubmitLink(){var a=document.getElementById("submitLinkOwnerResponse");a.setAttribute("onclick","return false;")}function onLPAttributionClick(){ta.util.cookie.setPIDCookie(25174);window.open("http://apps.facebook.com/localpicks")}function abbvReviews(d,a){try{var c={};var b;for(b=0;b<d.length;b++){var h=$(document.getElementById("UR"+d[b]));if(!h){continue}var g=h.getElements("p")[0];abbreviateText(g,355,a,c)}}catch(f){ta.util.error.record(f,"Failed to abbreviate reviews")}}function abbreviateText(b,a,j,d){var h="";var c;for(c=0;c<b.childNodes.length;c++){if(b.childNodes[c].nodeValue){h+="\n"+b.childNodes[c].nodeValue}}var f=abbreviate(h,50,a);if(h==f){return}var e=new Element(b.nodeName,{id:b.id+"_abbved",html:f.split("\n").join("<br />")});d.elems=d.elems||[];d.elems.push({visible:e,hidden:b});var g=new Element("span",{html:j,"class":"taLnk hvrIE6 moreLink",events:{click:function(){var k;for(k=0;k<d.elems.length;k++){d.elems[k].visible.hide();d.elems[k].hidden.show()}}}});e.appendChild(new Element("br"));e.appendChild(g);b.parentNode.insertBefore(e,b);b.hide()}function abbreviate(d,b,c){if(d.length<=c){return d}var a=d.trim().substring(0,c);a=a.substring(0,a.lastIndexOf(" "));if(a.length<b){return d}return a.trim()+"..."};ta.reviews.DELAYED_INJECT_LIST="reviews.delayed_inj";ta.reviews.NONNATIVE_INJECT_LIST="reviews.nonnative_inj";function initInjektReviewsContent(){var b={};ta.store(ta.reviews.NONNATIVE_INJECT_LIST,b);var a={};ta.store(ta.reviews.DELAYED_INJECT_LIST,a)}function injShowReview(d,b){if(!ta.has(ta.reviews.NONNATIVE_INJECT_LIST)){callAjaxFunByType(d,b);return}var c=ta.retrieve(ta.reviews.NONNATIVE_INJECT_LIST);if(c.hasOwnProperty(b)){var a=c[b]+":"+d;c[b]=a}else{c[b]=d}}function injShowReviewBlock(g,b,h,c,f){if(!ta.has(ta.reviews.NONNATIVE_INJECT_LIST)){showReviewBlock(g,b,h,c,f);return}var d=ta.retrieve(ta.reviews.NONNATIVE_INJECT_LIST);var e=b+":"+h+":"+c;if(d.hasOwnProperty(e)){var a=d[e]+":"+g;d[e]=a}else{d[e]=g}}function injektReviewsContent(){if(!ta.has(ta.reviews.NONNATIVE_INJECT_LIST)){return}var b=false;var c=ta.retrieve(ta.reviews.NONNATIVE_INJECT_LIST);for(var a in c){callAjaxFunByType(c[a],a);b=true}if(!b){postInjektCall()}ta.remove(ta.reviews.NONNATIVE_INJECT_LIST)}function postInjektCall(){if(!ta.has("reviews.ajax.post")){return}var a;var b=ta.remove("reviews.ajax.post");for(a=0;a<b.length;a++){b[a]()}}function callBeforePIC(a){var b=function(){var c=a.apply(this,arguments);postInjektCall();return c};return b}function callAjaxFunByType(c,a){if(null==a){ta.util.error.ajaxFailure.partial("reviews:callAjaxFunByType - null stype");return}var b=a.split(":");if(b.length==3){return showReviewBlock(c,b[0],b[1],b[2])}if(a=="reviewWithAnswers"||a=="reviewWithAnswersTrans"){_showReviewWithAnswers(c,"16",a)}else{showReview(c,a)}}function fixMTHelpfulUrl2(d,a){var c=ta.id(d);if(null==c){return}var e=c.getElement("input[name=returnTo]");if(e){var b=document.location.href;if(b.indexOf("#")>=0){b=b.substring(0,b.indexOf("#"))}e.value=b+"#mtreview_"+a}}function alignFirstReview(f,c){try{if(f.hasClass("first_aph")){f.removeClass("first_aph")}else{var b=c.getElementsByClassName("inlineReviewUpdate");if(b&&b.length>0){var a=b[0];if(a.hasClass("first")){a.removeClass("first")}}}}catch(d){}}function rpcParseReviewsBlock(b){try{var c=document.createElement("div");c.innerHTML=b;var h=false;for(var f=0;f<c.childNodes.length;f++){var a=c.childNodes[f];if(a==null||a.id==null){continue}var i=a.id;var d=i.split("_");if(d.length==2&&isFinite(d[1])){fixMTHelpfulUrl2(a,d[1])}var j=document.getElementById(a.id);if(j){if(!h){alignFirstReview(j,a);h=true}j.innerHTML=a.innerHTML}else{ta.util.error.ajaxFailure.partial("reviews:rpcParseReviewsBlock - element not found "+a.id)}}}catch(g){ta.util.error.record(g,"rpcParseReviewsBlock")}}function updateResponseText(a,b){if(b&&b!=""){var c=document.getElementById("response_"+a);if(c){c.innerHTML=b}}}function rpcParseReviews(reply){try{var reviews=eval("("+reply+")");if(reviews){var reviewCnt=reviews.length;for(var i=0;i<reviewCnt;++i){var rid=reviews[i].id;var r=ta.id("review_text_"+rid);if(r){r.set("html",reviews[i].body);var reviewTitle=ta.id("rn"+rid);if(!reviewTitle){reviewTitle=ta.id("r"+rid)}if(reviewTitle){reviewTitle.set("html",reviews[i].title)}var disclaimerTxt=reviews[i].disclaimer;if(disclaimerTxt!=""){elm=document.getElementById("disclaimer_"+rid+"_more");if(elm){elm.innerHTML="<br />"+disclaimerTxt}}updateResponseText(rid,reviews[i].response)}}}}catch(e){ta.util.error.record(e,"rpcParseReviews",null,{reviewCnt:reviewCnt})}}function rpcParseReviewWithAnswers(reply){var reviewAnswers=eval("("+reply+")");var reviewAnswerCnt=reviewAnswers.length;for(var i=0;i<reviewAnswerCnt;++i){var typeId=reviewAnswers[i].typeid;if(typeId==0){var rid=reviewAnswers[i].id;var elm=document.getElementById("review_text_"+rid);elm.innerHTML=reviewAnswers[i].body;var disclaimerTxt=reviewAnswers[i].disclaimer;if(disclaimerTxt!=""){elm=document.getElementById("disclaimer_"+rid+"_more");elm.innerHTML="<br />"+disclaimerTxt}var name=document.getElementById("review_quote_"+rid);if(name&&typeof(reviewAnswers[i].name)!="undefined"&&reviewAnswers[i].name){name.innerHTML="&#x201c;"+reviewAnswers[i].name+"&#x201d;"}updateResponseText(rid,reviewAnswers[i].response)}else{var rid=reviewAnswers[i].reviewid;var qid=reviewAnswers[i].questionid;var elm=document.getElementById("review_"+rid+"_answer_"+qid);elm.innerHTML=reviewAnswers[i].answer}}}function _showReviewWithAnswers(b,a,c){new Request({url:"/UserReviewController?a="+c+"&r="+b+"&n="+a,onSuccess:callBeforePIC(rpcParseReviewWithAnswers),onFailure:callBeforePIC(function(d){if(d.status!==408){ta.util.error.ajaxFailure("reviews:showReviewWithAnswers",d)}})}).get()}function showReviewBlock(c,d,f,b,e){var a="/UserReviewController?a="+d+"&r="+c+"&type="+f+"&tr="+b+"&n=16";if(typeof e!=="undefined"&&e){a+="&l="+e.toString()}new Request({url:a,onSuccess:callBeforePIC(rpcParseReviewsBlock),onFailure:function(){var g=new Request({url:a,onSuccess:callBeforePIC(function(h){rpcParseReviewsBlock(h)}),onFailure:callBeforePIC(ta.util.error.ajaxFailure.partial("reviews:showReview - second fail"))});g.get.delay(1000,g)}}).get()}function showReview(b,c,d){var a="/UserReviewController?a="+c+"&r="+b;new Request({url:a,onSuccess:d?d:callBeforePIC(rpcParseReviews),onFailure:function(){var e=new Request({url:a,onSuccess:d?d:callBeforePIC(function(f){rpcParseReviews(f)}),onFailure:d?d:callBeforePIC(ta.util.error.ajaxFailure.partial("reviews:showReview - second fail"))});e.get.delay(1000,e)}}).get()};window.addEvent("load",function(){window.addEvent("scrollingTabs_updateTabBar",ta.common.scrollAd.adjustForPersistentHeader)});ta.common.scrollAd=(function(u,q,s,m){var f=10,A=0,v=[0,250,600],C=null,i=null,p=15,h=p,a=null,r=false,c=null,b=null,B=1000,x=100,j=s.select(".sidebar_ad_parent"),y=j.length>0,w=1000,e=null,z=function(E){if(E){var D=E.getElements(".ad.iab_medRec");a=g(D);if(!a){A++}else{return a.getElement(".adInner")}}return null},g=function(E){for(var D=E.length-1;D>-1;D--){if(E[D].offsetHeight>x){return E[D]}}return null},d=function(){if(s.retrieve("persistent_sidebar")){return u.getElements("#BODYCON .gridA .sidebar").getLast()}return u.getElement("#BODYCON .gridA .sidebar")||u.getElement("#BODYCON .gridR .sidebar")||u.getElement("#ATTRACTIONS_NARROW .overview_sidebar")},n=function(){if(C&&a){var D=v[Math.round(C.offsetHeight/300)];if(D>0){i=D;if(u.all){a.style.zoom="1";C.style.position="static"}a.addClass("reserveH");a.style.height=D+"px";r=true}}},t=function(D){var G=null;for(var E=0;E<j.length;E++){var F=j[E].getCoordinates();if(D+h>F.top&&D+h+i<F.bottom){G=j[E];break}}return G},l=function(){q.removeEvent("scroll",s.common.scrollAd.handleScroll);if(C&&a){C.removeClass("scrollAd");a.removeClass("reserveH");a.removeProperty("style")}},k=function(E,D){var I=false,F=u.getElement(E),H,G;if(F&&F.getCoordinates&&i!=null&&h!=null&&D!=null){G=F.getCoordinates();if(G!=null){H=G.top;if(H!=null){I=D+i+h>H&&D<H+F.offsetHeight}}}return I},o=function(D){return k("#HSCS.similar_tab_rhr",D)};return{handleScroll:function(){try{if(!c){if(s.retrieve("persistent_sidebar")){c=u.getElements("#BODYCON .gridA .balance").getLast()}else{c=u.getElement("#BODYCON .gridA .balance")||u.getElement("#BODYCON .gridR .balance")||u.getElement("#ATTRACTIONS_NARROW .overview_balance")}}if(!b){b=d()}if(!(C&&C.id&&s.id(C.id))){C=z(b);if(C){C.setStyle("top",h);n()}}if(C&&b&&c){if(A>f){if(!y){l();return}}var J=c.getCoordinates().bottom;var F=b.getCoordinates().bottom;var H=F-h;var E=J-i-h;var I=J-F-i>0;var D=q.getScroll().y;if(D<E){if(I){if(D>H&&!o(D)){C.addClass("scrollAd");A=0}else{C.removeClass("scrollAd")}}else{A++}}else{if(y&&s.has("ads.contentBlocks")){if(e){var G=e.getCoordinates();if(D<G.top+h||D+h+i>G.bottom){e=t(D)}}else{e=t(D)}if(e&&e.offsetHeight>w){C.addClass("scrollAd")}else{C.removeClass("scrollAd")}}else{C.removeClass("scrollAd");if(!I){A+=f}}}}else{l()}}catch(K){l();s.util.error.record(K,"ta.common.scrollAd:handleScroll")}},adjustForPersistentHeader:function(D){if(D&&parseInt(D.height,10)){h=p+parseInt(D.height,10)}},addScrollHandler:function(){try{setTimeout(function(){q.addEvent("scroll",s.common.scrollAd.handleScroll)},B)}catch(D){s.util.error.record(D,"unable to init scrolling ad")}},resetScrollAd:function(){try{l();C=null;i=null;a=null;c=null;b=null;r=false;A=0}catch(D){s.util.error.record(D,"error resetting scrolling ad")}}}}(document,window,ta));(function(d){var g=d.select||z;var j={};function e(m,l,k,n){l=l.replace(/\.js$/i,"");j[m+":"+l]={reqs:k,inifunc:n}}function i(k,p,r){p=p.replace(/\.js$/i,"");var o=k[p];if(o){return o}var m=k.widget.name+":"+p;if(r[p]){throw m+" depends on itself recursively"}var n=j[m];if(!n){throw"dependency "+n+" can't be resolved"}r[p]=true;var s=n.reqs;var q=[];for(var l=0;l<s.length;l++){q.push(i(k,s[l],r))}o=n.inifunc.apply({},q);r[p]=false;k[p]=o;return o}function a(l,m){var k=c(l);if(k){return i(k,m,{})}}function h(k){var m,l;if(!k){k=document}if(typeof(k)==="string"){k=document.getElementById(k);if(!k){return}}m=g(".prw_rup",k);for(l=0;l<m.length;l++){f(m[l])}m=g(".prw_dyn",k);for(l=0;l<m.length;l++){f(m[l])}}function f(o){var m,k,l,n;if(!o){return}if(o._prWidgetContext){return}m=o.getAttribute("data-prwidget-init");if(typeof(m)!="string"){return}l=o.getAttribute("data-prwidget-name");if(!l){return}m=m.match(/[^\s,]+(\s+[^\s,]+)*/g)||[];k={widget:{name:l,element:o,modules:m}};o._prWidgetContext=k;for(n=0;n<m.length;n++){var p=m[n];i(k,p,{})}}function c(m){var l;if(!m){return null}var k=m._prWidgetContext;if(k){return k}l=m;while(l&&!l.hasAttribute("data-prwidget-init")){l=l.parentNode}if(l){k=l._prWidgetContext;if(k){m._prWidgetContext=k;return k}}return}function b(l,k){k=k||document.body;return k.getElement(".prw_"+l)}d.prwidgets={define:e,getjs:a,initWidgets:h,getWidgetElement:b}})(ta);ta.photos.autoload={prepareElement:function(c,g,h,d){var e=window.location.hash;if(typeof c!=="undefined"&&c&&(g||e.match(/#LPL/))){var i=e.match(/#LPL(\d+)/);if(i&&h){d=i[1]}if(typeof d!=="undefined"&&d){var f=c.className;var b=f.match(/(u_[^ ]*)/)[1];var a="?";if(b.match(/\?/)){a="&"}b+=a+"zfi="+d;c.className=f.replace(/(u_[^ ]*)/,b)}return true}return false}};ta.servlet.GeoCheckRates={checkBoxToggle:function(b,c){var a=$(c.parentNode);if(c.checked){a.addClass("checked")}else{a.removeClass("checked")}}};ta.widgets.ScrollingTabs=function(l,h,b,d,q){var o=l;var c=h;var j=b;var f=d;var n=q;var i=null;var p={};var a={};var g=false;var k=false;var e=true;this.init=function(){this.reset();var t=o&&o.substr?document.getElement(o):o;if(t){t.removeEvent("scroll",m);t.addEvent("scroll",m);this.test()}var s=document.getElements(h);for(var r=s.length-1;r>=0;r--){p[s[r].getAttribute("data-tab")]=s[r]}};this.test=function(){m()};this.setCallback=function(s,r){a[s]=r};this.reset=function(){i&&i.removeClass("current");i=null;p={};g=false};this.isScrolling=function(){return g};this.scrollToPosition=function(t,u){if(g){return}t=t||0;var s=u||300;g=true;var r=document.getElement(o);(new Fx.Scroll(r,{wait:false,duration:s,onComplete:function(){g=false;if(a.afterScroll){a.afterScroll(r)}}})).start(0,t)};this.show=function(t,y,x){if(!t||g){return}var w=y||300;g=true;var u=o&&o.substr?document.getElement(o):o;var r=0;if(j){r=isNaN(parseInt(x))?f:x}var s=p[t.id];if(s){if(e){if(window.location.hash&&t.id&&t.id.indexOf(window.location.hash.substring(1))>-1){var v=s.getCoordinates().top-r;ta.store("scrollingTabs.scrollOnPageLoad",v)}e=false}window.fireEvent("scrollingTabs_Start");(new Fx.Scroll(u||window,{wait:false,duration:w,offset:{x:0,y:-r},onComplete:function(){g=false;k=true;if(a.afterScroll){a.afterScroll(u,i,p[t.id])}window.fireEvent("scrollingTabs_End")}})).toElement(s)}};this.getTabAnchor=function(r){return p[r.id]};function m(){var w=null;var v=o&&o.substr?document.getElement(o):o;if(!v){return}var u=document.getElements(c);if(!u){return}for(var r=u.length-1;r>=0;r--){var t=false;if(j){if(v==window){t=u[r].isDisplayed()&&((u[r].getPosition().y-n)<=v.getScroll().y)}else{t=(u[r].getPosition(v).y-n)<=v.getScroll().y}}else{t=u[r].getPosition(v).y<=0}if(t){w=ta.id(u[r].getAttribute("data-tab"));break}}var s=i?i.id:null;if(w&&w.id!=s){if(i){i.removeClass("current")}w.addClass("current");if(k){k=false}else{if(a.tabChangeOnScroll&&!g){a.tabChangeOnScroll(v,i,w)}}i=w}if(a.test){a.test(v)}}};(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:true},initialize:function(c,b){this.element=this.subject=document.id(c);this.parent(b);if(typeOf(this.element)!="element"){this.element=document.id(this.element.getDocument().body)}if(this.options.wheelStops){var d=this.element,e=this.cancel.pass(false,this);this.addEvent("start",function(){d.addEvent("mousewheel",e)},true);this.addEvent("complete",function(){d.removeEvent("mousewheel",e)},true)}},set:function(){var b=Array.flatten(arguments);if(Browser.firefox){b=[Math.round(b[0]),Math.round(b[1])]}this.element.scrollTo(b[0],b[1])},compute:function(d,c,b){return[0,1].map(function(e){return Fx.compute(d[e],c[e],b)})},start:function(c,d){if(!this.check(c,d)){return this}var b=this.element.getScroll();return this.parent([b.x,b.y],[c,d])},calculateScroll:function(g,f){var d=this.element,b=d.getScrollSize(),h=d.getScroll(),j=d.getSize(),c=this.options.offset,i={x:g,y:f};for(var e in i){if(!i[e]&&i[e]!==0){i[e]=h[e]}if(typeOf(i[e])!="number"){i[e]=b[e]-j[e]}i[e]+=c[e]}return[i.x,i.y]},toTop:function(){return this.start.apply(this,this.calculateScroll(false,0))},toLeft:function(){return this.start.apply(this,this.calculateScroll(0,false))},toRight:function(){return this.start.apply(this,this.calculateScroll("right",false))},toBottom:function(){return this.start.apply(this,this.calculateScroll(false,"bottom"))},toElement:function(d){var c=document.id(d).getPosition(this.element),b=a(this.element)?{x:0,y:0}:this.element.getScroll();return this.start.apply(this,this.calculateScroll(c.x+b.x,c.y+b.y))},scrollIntoView:function(d,g,e){g=g?Array.from(g):["x","y"];d=document.id(d);var i={},f=d.getPosition(this.element),j=d.getSize(),h=this.element.getScroll(),b=this.element.getSize(),c={x:f.x+j.x,y:f.y+j.y};["x","y"].each(function(k){if(g.contains(k)){if(c[k]>h[k]+b[k]){i[k]=c[k]-b[k]}if(f[k]<h[k]){i[k]=f[k]}}if(i[k]==null){i[k]=h[k]}if(e&&e[k]){i[k]=i[k]+e[k]}},this);if(i.x!=h.x||i.y!=h.y){this.start(i.x,i.y)}return this},scrollToCenter:function(e,f,h){f=f?Array.from(f):["x","y"];e=document.id(e);var i={},c=e.getPosition(this.element),d=e.getSize(),b=this.element.getScroll(),g=this.element.getSize();["x","y"].each(function(j){if(f.contains(j)){i[j]=c[j]-(g[j]-d[j])/2}if(i[j]==null){i[j]=b[j]}if(h&&h[j]){i[j]=i[j]+h[j]}},this);if(i.x!=b.x||i.y!=b.y){this.start(i.x,i.y)}return this}});function a(b){return(/^(?:body|html)$/i).test(b.tagName)}})();ta.maps=ta.maps||{};ta.maps.trackpixel=(function(a,d,b,e){var c=[];return{storeTrackPixleSrc:function(f){if(f){c.push(f)}},loadSponsorTrackingPixel:function(f){c.each(function(g){var h=g.trim();var i=new Element("img",{"class":"tracking"});i.src=h});if(!f){c=[]}}}}(document,window,ta));function scaleImage(e,i,h,d,a){var j={width:0,height:0,targetleft:0,targettop:0};if((e<=0)||(i<=0)||(h<=0)||(d<=0)){return j}var c=h;var g=(i*h)/e;var b=(e*d)/i;var f=d;var a=!!a;if((b>h)==a){j.width=Math.floor(c);j.height=Math.floor(g)}else{j.width=Math.floor(b);j.height=Math.floor(f)}j.targetleft=Math.floor((h-j.width)/2);j.targettop=Math.floor((d-j.height)/2);return j}function onImageLoad(e,i){var d=ta.id(e);if(d){var b=d.clientWidth;var f=d.clientHeight;var c=d.parentNode.offsetWidth;var g=d.parentNode.offsetHeight;if(b==0){setTimeout(function(){onImageLoad(e)},300)}else{var a=scaleImage(b,f,c,g,i);if(a.width>0){d.width=a.width;d.height=a.height;d.style[ta.util.i18n.isRtl()?"right":"left"]=a.targetleft+"px";d.style.top=a.targettop+"px"}}}}(function(){function a(){if(this.clientWidth<=1){var b=this;setTimeout(function(){a.call(b)},50);return}onImageLoad(this);var c=(new Element(this)).getParent(".flexible_photo_cell");if(c){c.removeClass("invisible")}}ta.select(".flexibleImage").each(function(b){if(b.complete){a.call(b)}else{b.onload=a}});window.addEvent("resize",function(){ta.select(".flexibleImage").each(function(b){onImageLoad(b)})})})();(function(a){a.queueForReady(function(){var d=a.select(".triplist-cta")||[];d.each(function(e){a.trackEventOnPage(e.getAttribute("data-category"),"show","",0,true);var f=e.getElements("a")||[];f.each(function(i){var g=i.getAttribute("data-category");var j=i.getAttribute("data-event");var h=i.getAttribute("data-label");var k=i.getAttribute("data-value");i.addEvent("click",function(){a.setEvtCookie(g,j,h,k,i.href)})})});var c=a.select(".triplist-featured-in-cta")||[];var b=[];c.each(function(f){var e=f.getAttribute("data-category");if(e&&!b.contains(e)){a.trackEventOnPage(e,"show","",0,true);b.push(e)}})})}(ta));ta.answers=ta.answers||{};(function(a){a.placeholder=function(d,c){var b=c.getAttribute("placeholder");if(d.type==="focus"){if(c.value===b){c.value="";c.removeClass("placeholder")}}else{if(c.value===b||!c.value.trim()){c.value=b;c.addClass("placeholder")}}};a.commonFocus=function(c,b){a.placeholder(c,b);ta.load("altsess.js",null)};a.expandQuestionForm=function(c,b){b.removeClass("collapsed")}})(ta.answers);(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"war_review_rating_inline","handlers.js");a(["placement"],function(c){var b=ta.id(c.id);var d=function(){ta.trackEventOnPage("WAR_Review_Rating_Inline","Bubble_Hover","");var e=ta.find(".rate",b);var f=ta.id("overallRatingFlagText",b);new ta.widgets.DynamicRating(e,{prefix:"b",prefixes:{0:"gb"},textNode:f,strings:RATING_STRINGS,ratingNode:f,ratingNodeClass:"noRating",update:ta.find("input[name=qid10]",b),onSelect:function(){var h=ta.find("input[name=qid10]",b);if(h){ta.setEvtCookie("WAR_Review_Rating_Inline","Bubble_Select","",h.value,"/UserReviewEdit")}var g=ta.id("SUBMIT");g&&g.click()}}).enter()};return{addDynamicRating:d}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"ar_nearby_hotels_dust","handlers.js");a(["placement"],function(g){var i=0;var l=0;var j=null;var e=null;function h(){if(i>1){return}k();try{i=1;j=setTimeout(d,1000)}catch(n){ta.util.error.record(n,"meta_hotels_narrow - hoverIn")}}function k(){if(i!=1){return}clearTimeout(j);i=0}function d(){try{ta.trk(g.name+"_HOVER_EXPAND",false,null);i=2;var n=ta.id("expand_"+g.id+"_on_hover");if(!n){return}n.removeClass("hidden");n.addClass("expanding");var q=n.getSize().y;n.removeClass("expanding");n.addClass("show");var p=new Fx.Tween(n,{duration:"long",property:"height"});p.start(0,q)}catch(o){ta.util.error.record(o,"also viewed - avafExpand")}}function c(){try{ta.trk(g.name+"_EXPAND_MORE",false,null);var n=ta.id("hide_"+g.id+"_on_more");if(n){n.addClass("hidden")}n=ta.id("expand_"+g.id+"_on_more");if(!n){return}n.removeClass("hidden");if(l===0){n.addClass("expanding");l=n.getSize().y;n.removeClass("expanding")}n.addClass("show");new Fx.Tween(n,{duration:"long",property:"height"}).start(0,l)}catch(o){ta.util.error.record(o,"also viewed - avafMore")}}function f(){try{ta.trk(g.name+"_HOVER_EXPAND_LESS",false,null);i=2;var n=ta.id("expand_"+g.id+"_on_more");if(!n){return}new Fx.Tween(n,{duration:"long",property:"height"}).start(n.getSize().y,0).chain(function(){n.removeClass("show");n.addClass("hidden");var p=ta.id("hide_"+g.id+"_on_more");if(!p){return}p.removeClass("hidden")})}catch(o){ta.util.error.record(o,"also viewed - avafMore")}}function m(q){try{if(ta.retrieve("ta.redirectingPage")){return}if(!q||(q<1)){q=1}var p=new Date().getTime();e=p;var n=1000;var t=false;var o=false;t=ta.widgets.calendar.getCheckRatesData();if(!t){return}var r={};if(ta.meta){r=ta.commerce.meta.getMetaParams()}o=Object.merge(t,{detail:""+g.location_id,reqNum:(q>1)?"2":"1",placementName:g.name,servletClass:g.servletClass},r);var u=Object.toQueryString(o);if(!u||!u.trim()){ta.util.error.record(null,g.name+" load - toQueryString failure",null,o);return}new Request({url:"/MetaPlacementAjax",data:o,evalScripts:true,onSuccess:function(z){if(e!=p){return}var y=(q>=4)||z.contains("xsellHacStatusReady")||z.contains("xsellHacStatusSOL");if(!y){setTimeout(function(){m(q+1)},n)}else{var C=ta.id(g.id);var A=document.getElement(".clearDates");if(C){if(i==2){i=0}C.show();C.setStyle("height",0);C.setStyle("opacity","0");C.innerHTML=z;if(ta.prwidgets){ta.prwidgets.initWidgets(C)}if(A){A.style.display="none"}var x=C.getElement(".propList");if(x){var B=new Fx.Tween(C,{property:"opacity"});var v=x.getSize().y;var w=new Fx.Tween(C,{property:"height",onComplete:function(){C.setStyle("height","auto");B.start(0,1)}});w.start(0,v)}}}},onFailure:function(){if(ta.retrieve("ta.redirectingPage")){return}ta.util.error.record(null,g.name+" load - MetaPlacementAjax request failed")}}).send()}catch(s){ta.util.error.record(s,g.name+" load")}}ta.queueForLoad(function(){if(ta.widgets.calendar.getCheckRatesData()){m(1)}else{ta.on("onCalendarRangeSelect",function(){m(1)})}var n=ta.id(g.id);ta.util.element.doIfElementIsVisible(n,ta.trackEventOnPage,[g.name,"inView"])},"initialize "+g.container_id);function b(){var q=document.getElement(".col.sidebar");var s=document.getElement("#BODYCON .gridA .balance")||document.getElement("#BODYCON .gridR .balance");var n=document.getElement("#HSCS");if(!q||!s||!n){return}var r=s.getTop();var p=q.offsetHeight;var o=r+p-15;if(n.getTop()>o){n.addClass("similar_tab_rhr");$$("div.similar_tab_rhr_yes").show();$$("span.similar_tab_rhr_yes").show("inline");$$(".similar_tab_rhr_no").hide();if(!ta.retrieve("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on")){ta.store("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on",true);ta.trackEventOnPage("prodp13n_hr_similar_xsell","expand_into_rhr")}}else{n.removeClass("similar_tab_rhr");$$(".similar_tab_rhr_yes").hide();$$("div.similar_tab_rhr_no").show();$$("span.similar_tab_rhr_no").show("inline");if(ta.retrieve("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on")){ta.store("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on",false);ta.trackEventOnPage("prodp13n_hr_similar_xsell","shrink_from_rhr")}}}if(!ta.retrieve("ta.p13n.setHscsRHROverflow")){ta.store("ta.p13n.setHscsRHROverflow",true);setInterval(b,1000)}return{hoverIn:h,hoverOut:k,expandMore:c,expandLess:f}})})();(function(){var a=ta.prwidgets.define.bind(ta.prwidgets,"meta_small_rec_button","handlers.js");a(["widget"],function(c){function b(k,j,i,h,f,g){var e="ABS:HotelCheckRates-d"+i+"?src="+h;if(f){e+="&fromServlet="+f}if(g){e+="&Action="+g}return ta.call("ta.overlays.Factory.relRightRemoteHLB_optionalDelay_showArrow",k,j,e)}function d(h,g,f,i,e){ta.call("ta.overlays.Factory.microMetaOverlay",h,g,f,i,null,null,e)}return{calendarOverlay:b,metaOverlay:d}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"neighborhood_profile","handlers.js");a(["placement"],function(d){var g;var f=ta.id(d.id);function j(n,q){c();var s=ta.find(".nhDescriptionScroll",f);var p=9;if(s){var r=q(s);var o=m(s);if(r!==o){g=new Fx.Scroll(s,{transition:Fx.Transitions.linear,duration:Math.abs(o-r)*p});g.start(0,r)}}}function l(){return 0}function b(p){var o=p.getScrollHeight();var n=p.getHeight();return Math.max(o-n,l())}function m(n){return n?n.getScroll().y:0}function i(n){j(n,b)}function h(n){j(n,l)}function c(){if(g){g.stop();g=null}}function e(){var n=ta.select(".nhDescriptionScroll");n.each(function(v){var p=0;var o=ta.find(".bottom_panel",f);var s=ta.find(".top_panel",f);var u=b(v);var t=l();if(u>t){v.addEvent("mousewheel",function(x){x.stopPropagation();var w=m(v);var z=x.wheel<0;if(Browser&&Browser.ie&&x.event&&x.event.wheelDelta){var y;if(z){y=Math.min(50,u-w)}else{y=Math.max(-50,t-w)}v.scrollTop+=y;x.preventDefault()}else{if(z){if(w>=u){x.preventDefault()}}else{if(w<=t){x.preventDefault()}}}})}var q=function(w){if(p==t||p==u||w==t||w==u){p=w;s.toggleClass("invisible",w==0);o.toggleClass("invisible",w==u)}};var r=false;v.addEvent("scroll",function(){var w=v.getScroll().y;q(w);if(r&&w===u){r=false;ta.trackEventOnPage("neighborhood_widget_LB_HR_scrollable","maxScroll_LB_HR")}});q(v.getScroll().y);if(o.hasClass("invisible")){ta.trackEventOnPage("neighborhood_widget_LB_HR_not_scrollable","showWidget")}else{ta.trackEventOnPage("neighborhood_widget_LB_HR_scrollable","showWidget");r=true}})}function k(){ta.trackEventOnPage("neighborhood_widget_LB_HR","explore_neighborhood_LB_HR");return true}return{initialize:e,startScrollingDown:i,startScrollingUp:h,stopScrolling:c,exploreButton:k}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"waypoint_for_poi","handlers.js");a(["placement"],function(e){var d=null;function c(h){if(d){return false}var j=ta.id(e.id);if(!j){return false}var g=j.getElement(".h_name_link");if(!g){return false}e.requestAJAXPlacement(function k(m){var n=$(document.createElement("div"));n.innerHTML=m;var l=n.getElement(".widget");return b(g,l)},function i(){ta.trackEventOnPage("Restaurant_Review_Page","Hover_Failure")},{locationId:h,isDated:false});return false}function b(g,h){if(g&&h){d=new ta.overlays.RelativeOverlayBelow({style:"",offsetTop:-7,flipPadding:14,noPadding:true,activate:ta.overlays.ACTIVATE_HOVER,showCloseButton:false,autoShow:true,delayShow:false,centered:true,onShow:function(){return f(h)},content:h},g)}}function f(h){var i=h.getElement(".card_container");if(i&&h.parentElement&&h.parentElement.parentElement){var g=h.parentElement.parentElement.hasClass("relAbove");i.toggleClass("above",g);i.toggleClass("below",!g)}}return{showHover:c}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"neighborhood_widget","handlers.js");a(["placement"],function(e){var f=null;var l=null;function j(s,q,p,o){if(l){return false}ta.trackEventOnPage("neighborhood_widget","showWidget");var m=ta.id(e.id);if(!m){return false}var n=m.getElement(".info");if(!n){return false}e.requestAJAXPlacement(function t(u){var v=$(document.createElement("div"));v.innerHTML=u;l=v.getElement(".widgetContainer");return i(n,l)},function r(){},{geoId:p,locationId:o,isDated:false});return false}function i(m,n){if(!n||!m){return}f=new ta.overlays.RelativeOverlayBelow({style:"",offsetTop:-7,flipPadding:14,noPadding:true,activate:ta.overlays.ACTIVATE_CLICK_TOGGLE,showCloseButton:false,autoShow:false,delayShow:true,centered:true,onShow:function(){return c(f)},content:n},m)}function c(n){if(!n||!n.container){return}var o=n.container.getElement(".widget");if(!o){return}var m=n.container.hasClass("relAbove");o.toggleClass("widgetAbove",m);o.toggleClass("widgetBelow",!m)}function d(){if(f){f.hide()}return false}function h(){ta.trackEventOnPage("neighborhood_widget","thumbClicked");return false}function k(){ta.trackEventOnPage("neighborhood_widget","titleClicked");return false}function g(n,m){ta.trackEventOnPage("neighborhood_widget","explore_neighborhood_RR_small");return true}function b(){ta.trackEventOnPage("neighborhood_widget","readMore");if(!f||!f.container){return}var r=f.container.getElement(".baseText");var n=f.container.getElement(".fullText");if(r&&n){var p=f.container.getSize();r.addClass("hidden");n.removeClass("hidden");var o=f.container.getSize();if(f.container.hasClass("relAbove")&&p&&p.y&&o&&o.y&&p.y<o.y){var q=o.y-p.y;var m=f.container.getPosition();if(m&&m.x&&m.y){f.container.position({x:m.x,y:m.y-q})}}}return false}return{showWidget:j,closeWidget:d,readMore:b,thumbClicked:h,titleClicked:k,exploreThisNeighborhood:g}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"a10s_war_review_rating_inline","handlers.js");a(["placement"],function(d){var c={};var b=ta.id(d.id);c.addDynamicRating=function(){ta.trackEventOnPage("WAR_Review_Rating_Inline","Bubble_Hover","");var e=ta.find(".rate",b);var f=ta.id("overallRatingFlagText",b);new ta.widgets.DynamicRating(e,{prefix:"b",prefixes:{0:"gb"},textNode:f,strings:RATING_STRINGS,ratingNode:f,ratingNodeClass:"noRating",update:ta.find("input[name=qid10]",b),onSelect:function(){var h=ta.find("input[name=qid10]",b);if(h){ta.setEvtCookie("WAR_Review_Rating_Inline","Bubble_Select","",h.value,"/UserReviewEdit")}var g=ta.id("SUBMIT");g&&g.click()}}).enter()};c.initFlyout=function(g,e){g.onmouseover=null;var f=function(){var h=new ta.overlays.RelativeOverlayBelow({activate:ta.overlays.ACTIVATE_HOVER_DELAY,activateHoverDelayTime:500,style:"tooltip ttWhite "+ta.id(d.id).className,innerDivClass:"inner learnMoreFlyout",arrowClass:"arrow arrowUp",showArrow:true,allowFlip:false,autoShow:false,delayShow:true,offsetLeft:-125,offsetTop:-10},g);h.addEvent("onShow",function(){ta.trackEventOnPageOnce("a10s_campaign_f2r","overlay",e)});var i=ta.id(d.id).getElement(".cta .subtext span");if(i&&h.arrow){h.arrow.style.left=(ta.getPosition(i).x-ta.getPosition(g).x-124)+"px"}};ta.load("ta-overlays",f)||f()};return c})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"ar_nearby_hotels_xsell","handlers.js");a(["placement"],function(g){var i=0;var l=0;var j=null;var e=null;function h(){if(i>1){return}k();try{i=1;j=setTimeout(d,1000)}catch(n){ta.util.error.record(n,"meta_hotels_narrow - hoverIn")}}function k(){if(i!=1){return}clearTimeout(j);i=0}function d(){try{ta.trk(g.name+"_HOVER_EXPAND",false,null);i=2;var n=ta.id("expand_"+g.id+"_on_hover");if(!n){return}n.removeClass("hidden");n.addClass("expanding");var q=n.getSize().y;n.removeClass("expanding");n.addClass("show");var p=new Fx.Tween(n,{duration:"long",property:"height"});p.start(0,q)}catch(o){ta.util.error.record(o,"also viewed - avafExpand")}}function c(){try{ta.trk(g.name+"_EXPAND_MORE",false,null);var n=ta.id("hide_"+g.id+"_on_more");if(n){n.addClass("hidden")}n=ta.id("expand_"+g.id+"_on_more");if(!n){return}n.removeClass("hidden");if(l==0){n.addClass("expanding");l=n.getSize().y;n.removeClass("expanding")}n.addClass("show");new Fx.Tween(n,{duration:"long",property:"height"}).start(0,l)}catch(o){ta.util.error.record(o,"also viewed - avafMore")}}function f(){try{ta.trk(g.name+"_HOVER_EXPAND_LESS",false,null);i=2;var n=ta.id("expand_"+g.id+"_on_more");if(!n){return}new Fx.Tween(n,{duration:"long",property:"height"}).start(n.getSize().y,0).chain(function(){n.removeClass("show");n.addClass("hidden");var p=ta.id("hide_"+g.id+"_on_more");if(!p){return}p.removeClass("hidden")})}catch(o){ta.util.error.record(o,"also viewed - avafMore")}}function m(q){try{if(ta.retrieve("ta.redirectingPage")){return}if(!q||!(q>=1)){q=1}var p=new Date().getTime();e=p;var n=1000;var t=false;var o=false;t=ta.widgets.calendar.getCheckRatesData();if(!t){return}var r={};if(ta.meta){r=ta.commerce.meta.getMetaParams()}o=Object.merge(t,{detail:""+g.location_id,reqNum:(q>1)?"2":"1",placementName:g.name,servletClass:g.servletClass},r);var u=Object.toQueryString(o);if(!u||!u.trim()){ta.util.error.record(null,g.name+" load - toQueryString failure",null,o);return}new Request({url:"/MetaPlacementAjax",data:o,evalScripts:true,onSuccess:function(z){if(e!=p){return}var y=(q>=4)||z.contains("xsellHacStatusReady")||z.contains("xsellHacStatusSOL");if(!y){setTimeout(function(){m(q+1)},n)}else{var C=ta.id(g.id);var A=document.getElement(".clearDates");if(C){if(i==2){i=0}C.show();C.setStyle("height",0);C.setStyle("opacity","0");C.innerHTML=z;if(ta.prwidgets){ta.prwidgets.initWidgets(C)}if(A){A.style.display="none"}var x=C.getElement(".propList");if(x){var B=new Fx.Tween(C,{property:"opacity"});var v=x.getSize().y;var w=new Fx.Tween(C,{property:"height",onComplete:function(){C.setStyle("height","auto");B.start(0,1)}});w.start(0,v)}}}},onFailure:function(){if(ta.retrieve("ta.redirectingPage")){return}ta.util.error.record(null,g.name+" load - MetaPlacementAjax request failed")}}).send()}catch(s){ta.util.error.record(s,g.name+" load")}}ta.queueForLoad(function(){if(ta.widgets.calendar.getCheckRatesData()){m(1)}else{ta.on("onCalendarRangeSelect",function(){m(1)})}},"initialize "+g.container_id);function b(){var q=document.getElement(".col.sidebar");var s=document.getElement("#BODYCON .gridA .balance")||document.getElement("#BODYCON .gridR .balance");var n=document.getElement("#HSCS");if(!q||!s||!n){return}var r=s.getTop();var p=q.offsetHeight;var o=r+p-15;if(n.getTop()>o){n.addClass("similar_tab_rhr");$$("div.similar_tab_rhr_yes").show();$$("span.similar_tab_rhr_yes").show("inline");$$(".similar_tab_rhr_no").hide();if(!ta.retrieve("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on")){ta.store("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on",true);ta.trackEventOnPage("prodp13n_hr_similar_xsell","expand_into_rhr")}}else{n.removeClass("similar_tab_rhr");$$(".similar_tab_rhr_yes").hide();$$("div.similar_tab_rhr_no").show();$$("span.similar_tab_rhr_no").show("inline");if(ta.retrieve("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on")){ta.store("ta.p13n.prodp13n_hr_similar_tab_rhr_is_on",false);ta.trackEventOnPage("prodp13n_hr_similar_xsell","shrink_from_rhr")}}}if(!ta.retrieve("ta.p13n.setHscsRHROverflow")){ta.store("ta.p13n.setHscsRHROverflow",true);setInterval(b,1000)}return{hoverIn:h,hoverOut:k,expandMore:c,expandLess:f}})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"ar_above_fold_nearby_hotels_xsell","handlers.js");a(["placement"],function(c){var b=null;function d(i){try{if(ta.retrieve("ta.redirectingPage")){return}if(!i||!(i>=1)){i=1}var h=new Date().getTime();b=h;var f=1000;var l=false;var g=false;l=ta.widgets.calendar.getCheckRatesData();if(!l){return}var j={};if(ta.meta){j=ta.commerce.meta.getMetaParams()}g=Object.merge(l,{detail:""+c.location_id,reqNum:(i>1)?"2":"1",placementName:c.name,servletClass:c.servletClass},j);var m=Object.toQueryString(g);if(!m||!m.trim()){ta.util.error.record(null,c.name+" load - toQueryString failure",null,g);return}new Request({url:"/MetaPlacementAjax",data:g,evalScripts:true,onSuccess:function(n,p){if(b!==h){return}var e=(i>=4)||n.contains("xsellHacStatusReady")||n.contains("xsellHacStatusSOL");if(!e){setTimeout(function(){d(i+1)},f)}else{var o=ta.id(c.id);if(o){o.setStyle("opacity","0");o.show();o.innerHTML=n;o.fade("in")}}},onFailure:function(){if(ta.retrieve("ta.redirectingPage")){return}ta.util.error.record(null,c.name+" load - MetaPlacementAjax request failed")}}).send()}catch(k){ta.util.error.record(k,c.name+" load")}}ta.queueForLoad(function(){if(ta.widgets.calendar.getCheckRatesData()){d(1)}else{ta.on("onCalendarRangeSelect",function(){d(1)})}var e=ta.id(c.id);ta.util.element.doIfElementIsVisible(e,ta.trackEventOnPage,[c.name,"inView"])},"initialize "+c.container_id)})})();(function(){var a=ta.p13n.placements.define.bind(ta.p13n.placements,"nearby_attractions_xsell","handlers.js")})();(function(a){a.widgets||(a.widgets={});a.widgets.engagementCtas={load:function(b){new a.util.ajax({method:"GET",url:"/InlineReviewerCta",evalScripts:true}).success(function(c){if(c&&c.code===200){b.grab(new Element("div",{html:c.text}))}})},setupTypeahead:function(){var d=a.select(".inlineWarCta .iwc-typeahead")[0];var c=d.getProperty("data-pid");var e=+d.getProperty("data-geoId");var b={containerClass:"inlineWarCta-typeaheadResults",autopopulateHighlighted:false,selectInputText:false,width:null,minChars:3,maxResults:20,search:TypeAhead.utils.query(false,"eat",e,"",true,20),itemTemplate:TypeAhead.views.itemTemplate(),itemSelector:"li",nextField:false,assumeOnBlur:false,selectOnBlur:false,defaultValue:d.get("data-defaultValue"),defaultTextClass:"iwc-typeaheadDefault",shouldSubmit:function(){return false},onSelect:function(f){var i=f.value;var h=f.details.parent_ids[0];var g="/UserReviewEdit-g"+h+"-d"+i;a.setEvtCookie("InlineWarCta","TypeaheadSelect_"+c,"",0,g);a.util.cookie.setPIDCookie(c);window.location.href=g},resolveSelection:function(f){return f.name.stripTags()}};TypeAhead.views.configTypeAheadOptionsForSortingByPOIType(b,["EATERY"]);this.addPoiTypeahead=new TypeAhead(d,b);if(typeof globalTypeAheadCss!=="undefined"&&!a.has("ta.globalTypeAheadCss")){a.store("ta.globalTypeAheadCss",Asset.css(globalTypeAheadCss))}}}})(ta);(function(a){function b(e,f){if(!this.startNotificationSent){this.startNotificationSent=true;var d=new Date();this.startTime=d.getTime()+(d.getTimezoneOffset()*60*1000);new Request({method:"GET",data:{action:"RECORD",eventType:"start",uiOrigin:e,startTime:this.startTime,source:e,global:f?false:true,hadHistory:this.options.recentHistory&&this.options.recentHistory.length>0,scope:f},url:"/TypeAheadJson"}).send()}}function c(d,f,e,h,g,j){var i={uiOrigin:e,global:h<=1,scope:h>1?h:undefined,fromHistory:d.scope==="history",hadHistory:this.historyShown,type:d.type,source:e,startTime:this.startTime,action:"RECORD",userInteractionType:f,query:this.lastSuccessfulQuery?this.lastSuccessfulQuery:this.query,dataType:d.data_type};if(d.type==="SEARCH"){i.eventType="search_bttn"}else{i.eventType="select";i.value=d.value;i.selDepth=d.selectedIndex+1;i.totalNum=d&&this.results.length||0}if(g){i=g.call(this,i,d)}new Request({method:"GET",url:"/TypeAheadJson",data:i,onSuccess:j,onFailure:j}).send()}a.utils||(a.utils={});a.utils.sendStatusNotificationOnInit=function(d,e,f){return function(){b.call(this,d,e);f&&f()}};a.utils.sendStatusNotificationOnFocus=function(d,e,f){return function(){b.call(this,d,e);f&&f()}};a.utils.logOnSelect=function(d,e,f,g){return function(h,k,j,i){g&&(g=g.partial(h,k,j,i).bind(this));if(j){c.call(this,h,i,d,e,f,g)}g&&g()}};a.utils.query=function(e,i,d,k,m,j,f,h,l,g){return function(o){var n=ta.util.Deferred();var p={query:o,action:"API",startTime:this.startTime,uiOrigin:this.name,source:this.name,interleaved:true,geoPages:!m,blenderPages:!m,flightsToPages:!m,nearPages:false,details:true,types:i||"geo,hotel,eat,attr,vr",link_type:k||i||"geo,hotel,eat,attr",allowPageInsertionOnGeoMatch:false,defaultListInsertionType:"hotel",max:j||12,neighborhood_geos:h?true:false,requiredFields:f};if(ta.has("typeahead.relevancy_threshold")){p.scoreThreshold=0.5;p._ignoreMinCount=true}if(d!==""){p.nearby=true;p.local=true;p.parentids=d}else{p.global=true}if(g&&g!==""){p.scopeFilter=g}new ta.util.ajax({method:"GET",url:"/TypeAheadJson",data:p}).always(function(q){if(l){q&&q.results&&q.results.length>0&&n.resolve(q)||n.reject(JS_location_not_found)}else{q&&n.resolve(q)||n.reject(JS_location_not_found)}});return n.promise()}}}(TypeAhead));(function(a){a.userreview||(a.userreview={});a.userreview.common={};a.userreview.common.updateCharCounter=(function(){var b=200;var c=-1;return function(f,g){if(!f||!g){return}var e=f.getProperty("data-minlen")||b;var d=a.userreview.common.getInputLength(f);if(d>=e/2&&c<e/2){a.trackEventOnPage("WAR_Required","Review_Field_Half_Done","")}else{if(d>=e&&c<e){a.trackEventOnPage("WAR_Required","Review_Field_All_Done","")}}if(c<d){c=d}if(d===0){g.set("text",g.getProperty("data-empty-msg"))}else{if(d===1){g.set("text",g.getProperty("data-singular-msg"))}else{g.set("text",g.getProperty("data-plural-msg").replace("XLENGTH",d))}}g.toggleClass("longEnoughReview",d>=e)}})();a.userreview.common.trackFieldFocus=(function(){var c={};var b={ReviewText:["WAR_Required","Review_Field_Focus",""],ReviewTitle:["WAR_Required","Title_Field_Focus",""],ROOM_TIP:["WAR_Optional","Tips_Field_Focus",""]};return function(d){d=a.id(d);var e=b[d.id];if(!c[d.id]&&e){a.trackEventOnPage.apply(null,e);c[d.id]=1}}})();a.userreview.common.getInputLength=function(c){var b;var f=c.getProperty("data-lang");var e=c.value;if((/^zh/).test(f)){var d=e.match(/[\u4E00-\u9FAF]/g,"");b=d?d.length:0}else{b=e.trim().replace(/\s{2,}/g," ").length}return b}})(ta);(function(a,c,b,d){b=b||{};b.qualaroo=(function(){var i=["//","while(true);","while(1);","for(;;);"],g="check",h="force",o=function(q,p){if(b.log){b.log.error(q,p)}else{if(b.util&&b.util.error){b.util.error.record(q,p)}}},e=function(t,r){var q,s,p;if(!t||!r){return false}if(r!=="json"&&r!=="jsonp"){return t}for(q=0;q<i.length;q++){s=i[q];p=t.indexOf(s);if(p===0){return t.substring(s.length)}}return t},f=function(p){if(p){m("/CheckSurvey",j({key:p,action:"init"}))}else{o(null,"_initSurveyKey: No surveyKey to use as token for qualaroo survey display")}},k=function(p){if(p){m("/CheckSurvey",j({key:p,action:"set"}))}else{o(null,"_setSurveyKey: No surveyKey to use as token for qualaroo survey display")}},l=function(r,q,s,p){if(r&&q&&p){m("/CheckSurvey",j({key:r,action:p,name:q}),function(u){var t=JSON.parse(u),v=t&&t.display==="true";if(v){if(s){c.parent.postMessage("loadQualarooSurvey","*")}else{if(c.loadQualarooSurvey){if(c._kiq){var w={name:q};if(b.has("ta.qualaroo."+q)){w=Object.merge(w,b.retrieve("ta.qualaroo."+q))}c._kiq.push(["set",w])}c.loadQualarooSurvey()}else{o(null,"_conditionallyDisplaySurvey: window.loadQualarooSurvey is not defined, can't display survey")}}}})}else{o(null,"_conditionallyDisplaySurvey: No surveyKey or surveyName or checkAction defined for qualaroo survey display")}},n=function(){if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}var p=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];var s=null;for(var q=0;q<p.length;q++){try{s=new ActiveXObject(p[q]);break}catch(r){}}return s},m=function(q,t,s){var p=null;try{p=n()}catch(r){o(null,"ta.qualaroo._doGet: Unable to make request in _doGet");return}if(!p){o(null,"ta.qualaroo._doGet: Unable to make request in _doGet");return}p.open("GET",q+t,true);p.onreadystatechange=function(){if(p.readyState===4&&s){s(e(p.responseText,"json"))}};p.send(null)},j=function(r){var q=[];for(var p in r){q.push(encodeURIComponent(p)+"="+encodeURIComponent(r[p]))}return"?"+q.join("&")};return{initSurvey:function(p){f(p)},cancelSurvey:function(p){k(p)},checkAndDisplaySurvey:function(q,p,r){l(q,p,r,g)},forceDisplaySurvey:function(q,p,r){l(q,p,r,h)}}})()})(document,window,ta);